<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | Intelli-Read</title>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;700&display=swap');

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          font-family: "Chakra Petch", sans-serif;
          text-decoration: none;
          list-style: none;
        }

        /* ===== BODY ===== */
        body {
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          min-height: 100vh;
          position: relative;
          overflow-y: auto;
          padding-top: 80px;
          padding-bottom: 60px;
        }

        /* Blurred Background */
        body::before {
          content: "";
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: url(images/background.jpg);
          background-size: cover;
          background-position: center;
          filter: blur(6px);
          z-index: -1;
          transform: scale(1.05);
        }

        body::after {
          content: "";
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(255, 255, 255, 0.15);
          z-index: -1;
        }

        /* ===== HEADER ===== */
        header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 10px 30px;
          background: linear-gradient(to left, rgba(235, 198, 129, 0.8), rgba(114, 114, 223, 0.8));
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          z-index: 1000;
          box-shadow: 0 4px 10px rgba(255, 0, 0, 0.4);
        }

        header img {
          height: 50px;
          width: auto;
        }

        header h1 {
          color: #000;
          font-size: 26px;
          font-weight: 700;
        }

        /* ===== ADMIN PANEL ===== */
        .admin-container {
          width: 100%;
          max-width: 450px;
          margin: 50px 20px;
          padding: 25px;
          border-radius: 20px;
          background: rgba(255, 255, 255, 0.6);
          box-shadow: 0 6px 20px rgba(220, 155, 15, 0.7);
          backdrop-filter: blur(8px);
          animation: fadeIn 0.8s ease-in-out;
        }

        .admin-card {
          background: rgba(255, 255, 255, 0.7);
          border-radius: 15px;
          padding: 25px 35px;
          box-shadow: 0 8px 25px rgba(46, 4, 255, 0.4);
        }

        .admin-card h2 {
          color: #000;
          font-size: 35px;
          font-weight: 700;
          margin-bottom: 10px;
          text-align: center;
        }

        .admin-subtext {
          text-align: center;
          color: #333;
          font-size: 16px;
          margin-bottom: 25px;
          opacity: 0.8;
        }

        /* ===== FORM ===== */
        .admin-form {
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        .form-group {
          display: flex;
          flex-direction: column;
        }

        .form-group input {
          padding: 12px 14px;
          border-radius: 8px;
          border: 2px solid #ccc;
          font-size: 16px;
        }

        .form-group input:focus {
          border-color: #4b6cff;
          outline: none;
          transform: scale(1.02);
          position: relative;
          z-index: 1;
        }

        /* ===== ICON INPUT STYLE ===== */
        .icon-input {
          position: relative;
        }

        .icon-input i {
          position: absolute;
          top: 50%;
          transform: translateY(-50%);
          font-size: 20px;
          color: #7f90fe;
          z-index: 2;
          pointer-events: none;
        }

        .icon-input .bx-envelope,
        .icon-input .bx-lock-alt {
          left: 12px;
        }

        .icon-input input {
          padding-left: 40px;
          width: 100%;
        }

        .icon-input .toggle-eye {
          position: absolute;
          right: 12px;
          top: 50%;
          transform: translateY(-50%);
          cursor: pointer;
          color: #7f90fe;
          z-index: 3;
          pointer-events: auto;
        }

        input::-ms-reveal,
        input::-ms-clear {
          display: none;
        }

        /* ===== BUTTON ===== */
        .submit-btn {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: #fff;
          font-weight: 600;
          font-size: 16px;
          border: none;
          border-radius: 8px;
          padding: 12px 15px;
          cursor: pointer;
          transition: background 0.3s ease, transform 0.2s ease;
        }

        .submit-btn:hover {
          transform: translateY(-2px);
        }

        /* ===== FOOTER ===== */
        .main-footer {
          width: 100%;
          text-align: center;
          background: linear-gradient(to right, rgba(235, 198, 129, 0.8), rgba(114, 114, 223, 0.8));
          color: #fff;
          padding: 15px 0;
          display: flex;
          justify-content: space-around;
          flex-wrap: wrap;
          box-shadow: 0 -5px 20px rgba(225, 39, 39, 0.35),
                      0 -2px 10px rgba(249, 21, 21, 0.4),
                      0 0 25px rgba(247, 80, 14, 0.2);
          position: fixed;
          bottom: 0;
          left: 0;
          z-index: 1000;
        }

        .footer-section h4 {
          margin-bottom: 10px;
          color: black;
          font-weight: bold;
        }

        .footer-section span {
          color: yellow;
          font-weight: bold;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
          header img { height: 45px; }
          .admin-container { max-width: 400px; }
          .admin-card h2 { font-size: 26px; }
          .submit-btn { font-size: 15px; }
        }

        @media (max-width: 480px) {
          .admin-container { max-width: 90%; }
          .admin-card h2 { font-size: 22px; }
          .submit-btn { font-size: 14px; }
          .main-footer { flex-direction: column; gap: 10px; padding: 10px 0; }
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header>
    <a href="/Home"><img src="/images/logo.png" alt="IntelliRead Logo" style="height:80px; width:auto;"></a>
</header>

<!-- ===== ADMIN PANEL ===== -->
<div class="admin-container">
    <div class="admin-card">
        <h2>Welcome Admin üôé‚Äç‚ôÇÔ∏è</h2>
        <p class="admin-subtext">Manage users, monitor activity, and keep Intelli-Read running smoothly.</p>

        <form class="admin-form" id="adminForm">
            <div class="form-group icon-input">
                <i class='bx bx-envelope'></i>
                <input type="email" id="email" name="email" placeholder="Enter your email" required>
            </div>

            <div class="form-group icon-input">
                <i class='bx bx-lock-alt'></i>
                <input type="password" id="password" name="password" placeholder="Enter your password" required>
                <i class='bx bx-hide toggle-eye' id="togglePassword"></i>
            </div>

            <button type="button" class="submit-btn" onclick="validateAndLogin()" id="loginBtn">
                Login
            </button>

            <div id="errorMessage" style="color: red; text-align: center; margin-top: 10px; display: none;"></div>

            <p class="login-link">Back to User login - <a href="#" onclick="window.location.href='/login'">Click Here</a></p>
        </form>
    </div>
</div>

<!-- ===== FOOTER ===== -->
<footer class="main-footer">
    <div class="footer-section">
        <h4>About</h4>
        <p>Designed and Developed by Team <b style="color: rgb(206, 232, 10); font-size: large;">Rv</b></p>
    </div>
    <div class="footer-section">
        <p>&copy; <span>2025</span> Intelli-Read. All Rights Reserved.</p>
        <p><a href="#">Terms of Service</a> | <a href="#">Privacy Policy</a></p>
    </div>
    <div class="footer-section">
        <h4>License</h4>
        <p>Standard License</p>
    </div>
</footer>

<script>
    const togglePassword = document.querySelector('#togglePassword');
    const passwordInput = document.querySelector('#password');
    togglePassword.addEventListener('click', () => {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);
      togglePassword.classList.toggle('bx-show');
    });

    async function validateAndLogin() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const loginBtn = document.getElementById('loginBtn');
      const errorMessage = document.getElementById('errorMessage');

      errorMessage.style.display = 'none';

      if (!email || !password) {
        showError('Please fill in all fields');
        return;
      }

      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        showError('Please enter a valid email address');
        return;
      }

      try {
        loginBtn.innerHTML = 'Logging in...';
        loginBtn.disabled = true;

        const response = await fetch('/api/admin/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: email.toLowerCase().trim(), password })
        });

        const data = await response.json();

        if (data.success) {
          sessionStorage.setItem('admin', JSON.stringify(data.admin));
          sessionStorage.setItem('isAdmin', 'true');
          window.location.href = '/admin-dashboard';
        } else {
          showError(data.message || 'Invalid admin credentials');
        }
      } catch (error) {
        showError('Network error. Please check your connection and try again.');
      } finally {
        loginBtn.innerHTML = 'Login';
        loginBtn.disabled = false;
      }
    }

    function showError(message) {
      const errorMessage = document.getElementById('errorMessage');
      errorMessage.textContent = message;
      errorMessage.style.display = 'block';
    }

    document.getElementById('adminForm').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        validateAndLogin();
      }
    });

    window.addEventListener('load', function() {
      const isAdmin = sessionStorage.getItem('isAdmin');
      if (isAdmin) {
        window.location.href = '/admin-dashboard';
      }
    });
</script>

</body>
</html>